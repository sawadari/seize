# Seize Web UI - 設計コンセプト

**人間とAIの1on1インタラクションを促進する、グラフィカルなWebインターフェース**

---

## 🎯 コアコンセプト

### 「瞬く景色」の可視化

統一エージェント方程式における世界の状態遷移を、リアルタイムでグラフとして可視化します。

```
World₀ → [瞬き] → World₁ → [瞬き] → World₂ → ... → World_∞
```

### 1on1対話モデル

- **人間**: 意図を自然言語で入力
- **AI**: 統一エージェント方程式で処理
- **可視化**: 処理過程をノード・エッジのグラフで表示

---

## 🎨 UIレイアウト

```
┌─────────────────────────────────────────────────────────────┐
│  Seize - 統一エージェント方程式                                │
├─────────────────────────────────────────────────────────────┤
│                                                               │
│  ┌───────────────────────────┐  ┌─────────────────────────┐ │
│  │                           │  │                         │ │
│  │   グラフビュー              │  │   チャット              │ │
│  │   (React Flow)            │  │   (1on1対話)           │ │
│  │                           │  │                         │ │
│  │   ┌─────┐                │  │  👤: 要求を抽出して    │ │
│  │   │World₀│                │  │                         │ │
│  │   └──┬──┘                │  │  🤖: ℐ(意図解決)を    │ │
│  │      │ ℐ                 │  │      実行中...          │ │
│  │   ┌──▼──┐                │  │                         │ │
│  │   │ Goal │                │  │  [入力欄]              │ │
│  │   └──┬──┘                │  │  [送信]                │ │
│  │      │ 𝒞                 │  │                         │ │
│  │   ┌──▼──┐                │  └─────────────────────────┘ │
│  │   │ Plan │                │                               │
│  │   └──┬──┘                │  ┌─────────────────────────┐ │
│  │      │ Θ                 │  │  エージェント状態        │ │
│  │   ┌──▼──┐                │  │                         │ │
│  │   │World₁│                │  │  フェーズ: θ₃ (Allocate)│ │
│  │   └─────┘                │  │  反復: 2/10             │ │
│  │                           │  │  収束率: 45%            │ │
│  └───────────────────────────┘  └─────────────────────────┘ │
│                                                               │
└─────────────────────────────────────────────────────────────┘
```

---

## 🧩 コンポーネント設計

### 1. グラフビュー (GraphView)

**技術**: React Flow
**目的**: 世界の状態遷移とエージェントの処理過程を可視化

#### ノードタイプ

| ノード種類 | 説明 | 色 | アイコン |
|-----------|------|-----|---------|
| `WorldNode` | 世界の状態 | 青 | 🌍 |
| `IntentNode` | ℐ 意図解決 | 緑 | 🎯 |
| `CommandNode` | 𝒞 コマンドスタック | 紫 | 📋 |
| `TransformNode` | Θ 世界変換 | オレンジ | ⚡ |
| `GoalNode` | 目標 | 黄 | 🎪 |
| `TaskNode` | タスク | グレー | ✓ |

#### エッジタイプ

| エッジ種類 | 説明 | スタイル |
|-----------|------|---------|
| `世界遷移` | World_n → World_{n+1} | 実線、太い |
| `処理フロー` | ℐ → 𝒞 → Θ | 実線、中 |
| `依存関係` | Task → Task | 破線 |

#### インタラクション

- **ノードクリック**: 詳細情報をサイドパネルに表示
- **エッジクリック**: 変換ロジックを表示
- **ズーム/パン**: マウスホイール、ドラッグ
- **アニメーション**: 新しいノード追加時にフェードイン

### 2. チャットインターフェース (ChatInterface)

**技術**: React + Tailwind CSS
**目的**: 人間とAIの1on1対話

#### メッセージタイプ

```typescript
type Message = {
  id: string;
  role: 'human' | 'ai' | 'system';
  content: string;
  timestamp: Date;
  metadata?: {
    phase?: 'ℐ' | '𝒞' | 'Θ';
    worldVersion?: number;
    nodeIds?: string[];
  };
};
```

#### UI要素

- **メッセージバブル**: 人間（右寄せ、青）、AI（左寄せ、緑）
- **入力欄**: マルチライン、Markdown対応
- **送信ボタン**: Enter (送信), Shift+Enter (改行)
- **ステータス表示**: "AI思考中..."、"処理完了"

### 3. エージェント状態パネル (AgentStatePanel)

**目的**: 統一エージェントの現在の状態をリアルタイム表示

#### 表示項目

```typescript
type AgentState = {
  currentPhase: 'ℐ' | '𝒞' | 'Θ' | 'idle';
  iteration: number;
  maxIterations: number;
  convergenceRate: number; // 0-100%
  worldVersion: number;
  taskProgress: {
    total: number;
    completed: number;
    inProgress: number;
    pending: number;
  };
};
```

#### プログレスバー

- **全体進捗**: 反復回数ベース
- **収束率**: 0-100%のゲージ
- **タスク進捗**: 完了/実行中/保留

### 4. タイムライン (Timeline)

**目的**: 世界の変化履歴を時系列で表示

```
World₀ (0:00) → World₁ (0:05) → World₂ (0:12) → World₃ (0:18)
```

#### 機能

- **クリックで時間遡行**: 過去の世界状態を表示
- **アニメーション再生**: 状態遷移を動画のように再生
- **スナップショット保存**: 特定の世界状態を保存

---

## 🔄 データフロー

```
┌──────────┐
│  Human   │
│  Input   │
└────┬─────┘
     │
     ▼
┌──────────────┐
│ ChatInterface│
└────┬─────────┘
     │
     ▼
┌──────────────┐      ┌──────────────┐
│ UnifiedAgent │─────▶│  WebSocket   │
│   (Rust)     │      │   Server     │
└────┬─────────┘      └──────┬───────┘
     │                       │
     │ State Updates         │
     ▼                       ▼
┌──────────────┐      ┌──────────────┐
│   GraphView  │◀─────│   React UI   │
└──────────────┘      └──────────────┘
```

---

## 🎨 デザインシステム

### カラーパレット

```css
/* Primary Colors */
--color-world: #3B82F6;      /* 青 - 世界 */
--color-intent: #10B981;     /* 緑 - 意図 */
--color-command: #8B5CF6;    /* 紫 - コマンド */
--color-transform: #F59E0B;  /* オレンジ - 変換 */
--color-goal: #FBBF24;       /* 黄 - 目標 */

/* UI Colors */
--color-bg-dark: #1F2937;    /* ダークモード背景 */
--color-bg-light: #F9FAFB;   /* ライトモード背景 */
--color-text-primary: #111827;
--color-text-secondary: #6B7280;

/* Status Colors */
--color-success: #10B981;
--color-warning: #F59E0B;
--color-error: #EF4444;
--color-info: #3B82F6;
```

### タイポグラフィ

```css
/* Headings */
h1: 2rem, bold, Inter
h2: 1.5rem, semibold, Inter
h3: 1.25rem, medium, Inter

/* Body */
body: 1rem, regular, Inter
small: 0.875rem, regular, Inter

/* Code */
code: 0.875rem, monospace, 'Fira Code'
```

### アニメーション

```css
/* ノード追加 */
@keyframes fadeIn {
  from { opacity: 0; transform: scale(0.8); }
  to { opacity: 1; transform: scale(1); }
}

/* 瞬き（状態遷移） */
@keyframes blink {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.3; }
}

/* 処理中 */
@keyframes pulse {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.5; }
}
```

---

## 🚀 技術スタック

### フロントエンド

- **Framework**: React 18 + TypeScript
- **ビルドツール**: Vite
- **スタイリング**: Tailwind CSS
- **グラフ描画**: React Flow
- **状態管理**: Zustand
- **通信**: WebSocket (Socket.io)
- **アニメーション**: Framer Motion

### バックエンド

- **言語**: Rust
- **Webフレームワーク**: Axum
- **WebSocket**: axum-socket
- **統一エージェント**: seize-core

### デプロイ

- **フロントエンド**: Vercel / Netlify
- **バックエンド**: Fly.io / Railway
- **コンテナ**: Docker

---

## 📱 レスポンシブデザイン

### デスクトップ (>1024px)

- グラフビュー: 60%
- チャット: 30%
- 状態パネル: 10%

### タブレット (768px-1024px)

- グラフビュー: 50%
- チャット: 50%
- 状態パネル: 折りたたみ

### モバイル (<768px)

- タブ切り替え: グラフ / チャット
- 状態パネル: ボトムシート

---

## 🎯 UXシナリオ

### シナリオ1: 要求抽出の可視化

1. **人間**: 「ステークホルダーインタビューから要求を抽出して」
2. **AI**: ℐ フェーズ開始（グラフに緑ノード追加）
3. **AI**: 「要求を分析中...」（チャットにメッセージ）
4. **AI**: 𝒞 フェーズ開始（紫ノードに遷移）
5. **AI**: タスク分解（複数のTaskNode追加）
6. **AI**: Θ フェーズ開始（オレンジノードに遷移）
7. **AI**: 「3個の要求を抽出しました」（結果をチャットに表示）
8. **グラフ**: World₀ → World₁ への遷移が完了

### シナリオ2: インタラクティブな調整

1. **人間**: グラフ内の TaskNode をクリック
2. **サイドパネル**: タスク詳細を表示
3. **人間**: 「この要求の優先度を Must に変更して」
4. **AI**: 要求を更新し、グラフを再描画
5. **グラフ**: 該当ノードの色が変更

---

## 🔒 セキュリティ考慮事項

- **WebSocket認証**: JWT トークン
- **入力検証**: サニタイゼーション
- **レート制限**: 1ユーザー 10req/分
- **XSS対策**: DOMPurifyでHTMLサニタイズ
- **CORS**: 許可されたオリジンのみ

---

## 📈 パフォーマンス目標

- **初回ロード**: 2秒以内
- **レスポンスタイム**: 100ms以内（UI操作）
- **WebSocketレイテンシ**: 50ms以内
- **グラフレンダリング**: 1000ノードまでスムーズ

---

## 🎓 アクセシビリティ

- **WCAG 2.1 AA準拠**
- **キーボードナビゲーション**: すべての操作可能
- **スクリーンリーダー対応**: ARIA属性
- **カラーコントラスト**: 4.5:1以上

---

**このデザインで、人間とAIの協働を次のレベルへ！**
